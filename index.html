<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animon Story Character Creator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --accent-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --warning-gradient: linear-gradient(135deg, #fc4a1a 0%, #f7b733 100%);

            --primary-color: #4facfe;
            --secondary-color: #667eea;
            --accent-color: #fa709a;
            --success-color: #11998e;
            --warning-color: #fc4a1a;
            --dark-color: #2c3e50;

            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --text-light: #bdc3c7;

            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fb;
            --bg-tertiary: #ecf0f1;

            --border-radius: 16px;
            --border-radius-lg: 24px;
            --border-radius-sm: 8px;

            --shadow-sm: 0 2px 8px rgba(0,0,0,0.06);
            --shadow-md: 0 8px 25px rgba(0,0,0,0.1);
            --shadow-lg: 0 20px 40px rgba(0,0,0,0.15);
            --shadow-xl: 0 25px 50px rgba(0,0,0,0.25);

            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            padding: 20px;
            font-weight: 400;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg-primary);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-xl);
            overflow: hidden;
            backdrop-filter: blur(20px);
        }

        .header {
            background: var(--secondary-gradient);
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="white" opacity="0.1"/><circle cx="80" cy="80" r="3" fill="white" opacity="0.1"/><circle cx="40" cy="70" r="1" fill="white" opacity="0.1"/></svg>');
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(0px) translateX(0px); }
            50% { transform: translateY(-20px) translateX(10px); }
            100% { transform: translateY(0px) translateX(0px); }
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            font-weight: 800;
            letter-spacing: -0.02em;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.2em;
            font-weight: 300;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .tabs {
            display: flex;
            background: var(--bg-secondary);
            border-bottom: none;
            padding: 0 40px;
            gap: 8px;
        }

        .tab {
            flex: 1;
            padding: 20px 30px;
            text-align: center;
            background: transparent;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            color: var(--text-secondary);
            position: relative;
            margin-top: 8px;
        }

        .tab.active {
            background: var(--bg-primary);
            color: var(--primary-color);
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .tab:hover:not(.active) {
            background: rgba(255,255,255,0.5);
            transform: translateY(-2px);
            color: var(--text-primary);
        }

        .content {
            padding: 40px;
            min-height: 600px;
            background: var(--bg-primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 32px;
        }

        .form-group > label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--bg-tertiary);
            border-radius: var(--border-radius);
            font-size: 16px;
            font-family: inherit;
            transition: var(--transition);
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
            transform: translateY(-2px);
        }

        .form-group input:hover, .form-group select:hover, .form-group textarea:hover {
            border-color: var(--primary-color);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .stat-item {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            padding: 24px;
            border-radius: var(--border-radius);
            text-align: center;
            border: 2px solid var(--bg-tertiary);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--secondary-gradient);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .stat-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .stat-item:hover::before {
            transform: scaleX(1);
        }

        .stat-item h4 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-weight: 700;
            font-size: 18px;
        }

        .stat-item p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .stat-slider {
            width: 100%;
            margin: 16px 0;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            border-radius: 4px;
            background: var(--bg-tertiary);
            outline: none;
            transition: var(--transition);
        }

        .stat-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .stat-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: var(--shadow-md);
        }

        .stat-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .points-remaining {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 24px;
            text-align: center;
            font-weight: 600;
            color: var(--primary-color);
            border: 2px solid rgba(79, 172, 254, 0.2);
            position: relative;
            overflow: hidden;
        }

        .points-remaining::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .signature-attack {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            padding: 32px;
            border-radius: var(--border-radius);
            border-left: 6px solid var(--warning-color);
            margin-top: 32px;
            position: relative;
            overflow: hidden;
        }

        .signature-attack::before {
            content: '‚ö°';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            opacity: 0.3;
        }

        .signature-attack h3 {
            color: var(--warning-color);
            margin-bottom: 20px;
            font-weight: 700;
        }

        .stage-signature-attack {
            background: rgba(252, 74, 26, 0.05);
            border: 1px solid rgba(252, 74, 26, 0.2);
            border-radius: var(--border-radius-sm);
            padding: 16px;
            margin-top: 16px;
        }

        .stage-signature-attack h5 {
            color: var(--warning-color);
            margin: 0 0 12px 0;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stage-signature-attack .form-row {
            gap: 12px;
        }

        .stage-signature-attack .form-group {
            margin-bottom: 12px;
        }

        .stage-signature-attack input,
        .stage-signature-attack select {
            padding: 6px 8px;
            font-size: 12px;
            border: 1px solid var(--bg-tertiary);
            border-radius: 4px;
        }

        .stage-signature-attack label {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .effects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
            margin-top: 8px;
        }

        .effect-input {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .effect-input input {
            flex: 1;
        }

        .effect-input select {
            width: 80px;
        }

        .quality-item {
            background: linear-gradient(135deg, var(--bg-primary) 0%, #e8f5e8 100%);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 16px;
            border-left: 6px solid var(--success-color);
            transition: var(--transition);
        }

        .quality-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-sm);
        }

        .character-summary {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, #f0f8ff 100%);
            padding: 40px;
            border-radius: var(--border-radius);
            margin-top: 32px;
            border: 2px solid var(--bg-tertiary);
        }

        .summary-section {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 2px solid rgba(79, 172, 254, 0.1);
            position: relative;
        }

        .summary-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .summary-section h3 {
            color: var(--primary-color);
            margin-bottom: 16px;
            font-weight: 700;
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .summary-section p {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .summary-section strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .export-buttons {
            display: flex;
            gap: 20px;
            margin-top: 40px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--secondary-gradient);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--dark-gradient);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .description {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 24px;
            border-radius: var(--border-radius);
            margin-bottom: 32px;
            font-style: italic;
            border-left: 6px solid var(--primary-color);
            position: relative;
        }

        .description::before {
            content: 'üí°';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 20px;
            opacity: 0.6;
        }

        .warning {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 2px solid var(--warning-color);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 24px;
            position: relative;
        }

        .warning::before {
            content: '‚ö†Ô∏è';
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 18px;
        }

        .error {
            color: var(--warning-color);
            font-size: 14px;
            margin-top: 8px;
            font-weight: 500;
        }

        .evolution-stages {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 24px;
        }

        .evolution-stage {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            border: 2px solid var(--bg-tertiary);
            border-radius: var(--border-radius);
            padding: 20px;
            position: relative;
            transition: var(--transition);
            overflow: hidden;
        }

        .evolution-stage::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--secondary-gradient);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .evolution-stage:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .evolution-stage:hover::before {
            transform: scaleX(1);
        }

        .evolution-stage.current {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, #e7f3ff 0%, #f0f8ff 100%);
            box-shadow: var(--shadow-sm);
        }

        .evolution-stage.current::before {
            transform: scaleX(1);
        }

        .evolution-stage h4 {
            color: var(--primary-color);
            margin-bottom: 16px;
            text-align: center;
            font-weight: 700;
            font-size: 18px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stage-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }

        .stage-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .stage-derived {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .compact-stat-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 12px;
            border-radius: var(--border-radius-sm);
            text-align: center;
            border: 1px solid var(--bg-tertiary);
            transition: var(--transition);
        }

        .compact-stat-item:hover {
            background: rgba(255, 255, 255, 0.9);
            border-color: var(--primary-color);
        }

        .compact-stat-item label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .compact-stat-item .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .compact-stat-slider {
            width: 100%;
            margin: 4px 0;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: var(--bg-tertiary);
            outline: none;
            transition: var(--transition);
        }

        .compact-stat-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .compact-stat-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        .compact-stat-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--secondary-gradient);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
        }

        .stage-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .stage-header h4 {
            margin: 0;
            font-size: 16px;
        }

        .stage-requirement {
            font-size: 11px;
            background: rgba(79, 172, 254, 0.1);
            color: var(--primary-color);
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .compact-points-remaining {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 8px 12px;
            border-radius: var(--border-radius-sm);
            margin-bottom: 12px;
            text-align: center;
            font-weight: 600;
            font-size: 12px;
            color: var(--primary-color);
            border: 1px solid rgba(79, 172, 254, 0.2);
        }

        .stage-qualities {
            margin-top: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--bg-tertiary);
        }

        .stage-qualities h5 {
            margin: 0 0 12px 0;
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .stage-qualities .form-group {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 8px;
        }

        .stage-qualities label {
            font-size: 11px;
            color: var(--text-secondary);
            white-space: nowrap;
        }

        .stage-qualities input[type="text"] {
            flex: 1;
            padding: 4px 8px;
            border: 1px solid var(--bg-tertiary);
            border-radius: 4px;
            font-size: 11px;
        }

        .stage-qualities input[type="number"] {
            width: 50px;
            padding: 4px 6px;
            border: 1px solid var(--bg-tertiary);
            border-radius: 4px;
            font-size: 11px;
        }

        .character-info {
            background: linear-gradient(135deg, #e8f4fd 0%, #f0f8ff 100%);
            border: 1px solid rgba(79, 172, 254, 0.2);
            border-radius: var(--border-radius-sm);
            padding: 16px;
            margin: 16px 0;
            font-size: 14px;
            color: var(--text-primary);
        }

        .character-info h4 {
            color: var(--primary-color);
            margin: 0 0 8px 0;
            font-weight: 600;
        }

        .character-info p {
            margin: 4px 0;
            line-height: 1.5;
        }

        .suggestion-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .suggestion-tag {
            background: var(--secondary-gradient);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            cursor: pointer;
            transition: var(--transition);
        }

        .suggestion-tag:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .element-effectiveness {
            display: flex;
            gap: 16px;
            margin-top: 8px;
            font-size: 12px;
        }

        .effectiveness-strong {
            color: #10b981;
            font-weight: 600;
        }

        .effectiveness-weak {
            color: #ef4444;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: var(--border-radius);
            }

            .header {
                padding: 40px 20px;
            }

            .header h1 {
                font-size: 2.5em;
            }

            .tabs {
                flex-direction: column;
                padding: 0 20px;
                gap: 4px;
            }

            .tab {
                margin: 0;
                padding: 16px 20px;
                border-radius: var(--border-radius-sm);
            }

            .content {
                padding: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .stat-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stage-content {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .stage-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .stage-derived {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }

            .export-buttons {
                flex-direction: column;
            }

            .btn {
                padding: 14px 20px;
                font-size: 14px;
            }

            .evolution-stage {
                padding: 16px;
            }

            .compact-stat-item {
                padding: 8px;
            }

            .compact-stat-item .stat-value {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .header p {
                font-size: 1em;
            }

            .content {
                padding: 15px;
            }

            .evolution-stage {
                padding: 12px;
            }

            .stage-stats {
                grid-template-columns: 1fr;
                gap: 6px;
            }

            .stage-derived {
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
            }

            .compact-stat-item {
                padding: 6px;
            }

            .compact-stat-item label {
                font-size: 10px;
            }

            .compact-stat-item .stat-value {
                font-size: 14px;
            }

            .stage-header h4 {
                font-size: 14px;
            }

            .stage-requirement {
                font-size: 9px;
                padding: 2px 6px;
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
                border-radius: 0;
            }

            .tabs, .export-buttons {
                display: none;
            }

            .content {
                padding: 20px;
            }

            .tab-content {
                display: block !important;
            }

            .evolution-stage {
                break-inside: avoid;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÆ Animon Story Character Creator</h1>
            <p>Create your Kid and Animon characters for the Animon Story TTRPG</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('kid')">Kid Character</button>
            <button class="tab" onclick="showTab('animon')">Animon Partner</button>
            <button class="tab" onclick="showTab('summary')">Character Summary</button>
        </div>

        <div class="content">
            <!-- Kid Character Tab -->
            <div id="kid" class="tab-content active">
                <h2>Create Your Kid Character</h2>
                <div class="description">
                    The main characters of Animon Story are the Kids and their partner Animon. Each Kid has unique traits, talents, and a special relationship with their Animon companion.
                </div>

                <div class="form-group">
                    <label for="player-name">Player Name:</label>
                    <input type="text" id="player-name" placeholder="Enter your name">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="kid-name">Kid Name:</label>
                        <input type="text" id="kid-name" placeholder="Enter your Kid's name">
                    </div>

                    <div class="form-group">
                        <label for="kid-type">Kid Type:</label>
                        <select id="kid-type">
                            <option value="">Choose a Kid Type</option>
                            <option value="bookworm">Bookworm</option>
                            <option value="computer-wizard">Computer Wizard</option>
                            <option value="delinquent">Delinquent</option>
                            <option value="free-spirit">Free Spirit</option>
                            <option value="gamer">Gamer</option>
                            <option value="gentle-heart">Gentle Heart</option>
                            <option value="grown-up">Grown-Up</option>
                            <option value="jock">Jock</option>
                            <option value="little-kid">Little Kid</option>
                            <option value="loner">Loner</option>
                            <option value="rising-star">Rising Star</option>
                            <option value="wild-child">Wild Child</option>
                            <option value="young-aristocrat">Young Aristocrat</option>
                        </select>
                    </div>
                </div>

                <!-- Kid Type Information Display -->
                <div id="kid-type-info" class="character-info" style="display: none;">
                    <h4 id="kid-type-title">Kid Type Information</h4>
                    <p id="kid-type-description"></p>
                    <p><strong>Type Feature:</strong> <span id="kid-type-feature"></span></p>

                    <div class="suggestion-section">
                        <p><strong>Suggested Talents:</strong></p>
                        <div class="suggestion-list" id="suggested-talents"></div>
                    </div>

                    <div class="suggestion-section">
                        <p><strong>Suggested Flaws:</strong></p>
                        <div class="suggestion-list" id="suggested-flaws"></div>
                    </div>

                    <div class="suggestion-section">
                        <p><strong>Suggested Desires:</strong></p>
                        <div class="suggestion-list" id="suggested-desires"></div>
                    </div>

                    <div class="suggestion-section">
                        <p><strong>Suggested Special Items:</strong></p>
                        <div class="suggestion-list" id="suggested-special-items"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Kid Traits (Distribute scores of 4, 3, and 2):</label>
                    <div class="points-remaining" id="trait-points">Points to assign: 4, 3, 2</div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>Body</h4>
                            <p>Physical power and endurance</p>
                            <select id="trait-body" onchange="updateTraitPoints()">
                                <option value="">Choose</option>
                                <option value="4">4</option>
                                <option value="3">3</option>
                                <option value="2">2</option>
                            </select>
                        </div>
                        <div class="stat-item">
                            <h4>Mind</h4>
                            <p>Intelligence and reasoning</p>
                            <select id="trait-mind" onchange="updateTraitPoints()">
                                <option value="">Choose</option>
                                <option value="4">4</option>
                                <option value="3">3</option>
                                <option value="2">2</option>
                            </select>
                        </div>
                        <div class="stat-item">
                            <h4>Spirit</h4>
                            <p>Determination and charisma</p>
                            <select id="trait-spirit" onchange="updateTraitPoints()">
                                <option value="">Choose</option>
                                <option value="4">4</option>
                                <option value="3">3</option>
                                <option value="2">2</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="talent1">Talent 1 (Rank 1):</label>
                        <input type="text" id="talent1" placeholder="e.g., Biology, Climbing, Persuasion">
                    </div>
                    <div class="form-group">
                        <label for="talent2">Talent 2 (Rank 1):</label>
                        <input type="text" id="talent2" placeholder="e.g., Drawing, Small Talk, Quiet Confidence">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="kid-flaw">Flaw:</label>
                        <input type="text" id="kid-flaw" placeholder="e.g., Allergies, Phobias, Personality quirks">
                    </div>
                    <div class="form-group">
                        <label for="kid-desire">Desire:</label>
                        <input type="text" id="kid-desire" placeholder="Something they want more than anything">
                    </div>
                </div>

                <div class="form-group">
                    <label for="special-item">Special Item:</label>
                    <input type="text" id="special-item" placeholder="Something they're rarely seen without">
                </div>

                <div class="form-group">
                    <label for="kid-stuff">Stuff (Other items):</label>
                    <textarea id="kid-stuff" rows="3" placeholder="List other items the Kid carries"></textarea>
                </div>

                <!-- Bond Level Section -->
                <div class="form-section">
                    <h3>Bond Level & Experience</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="bond-level">Bond Level:</label>
                            <input type="number" id="bond-level" min="1" max="10" value="1">
                        </div>
                        <div class="form-group">
                            <label for="xp">XP:</label>
                            <input type="number" id="xp" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="bond-points">Bond Points:</label>
                            <input type="number" id="bond-points" min="0" value="3">
                        </div>
                        <div class="form-group">
                            <label for="bond-strain">Bond Strain:</label>
                            <input type="number" id="bond-strain" min="0" value="0">
                        </div>
                    </div>
                </div>

                <!-- Harm Section -->
                <div class="form-section">
                    <h3>Harm</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Harm Level 1:</label>
                            <input type="text" id="harm-1" placeholder="Minor injuries">
                        </div>
                        <div class="form-group">
                            <label>Harm Level 2:</label>
                            <input type="text" id="harm-2" placeholder="Moderate injuries">
                        </div>
                        <div class="form-group">
                            <label>Harm Level 3:</label>
                            <input type="text" id="harm-3" placeholder="Severe injuries">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="shaken"> Shaken
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Relationships Section -->
                <div class="form-section">
                    <h3>Relationships</h3>
                    <div class="form-group">
                        <textarea id="relationships" rows="4" placeholder="Describe relationships with other Kids, family members, or important NPCs"></textarea>
                    </div>
                </div>
            </div>

            <!-- Animon Character Tab -->
            <div id="animon" class="tab-content">
                <h2>Create Your Animon Partner</h2>
                <div class="description">
                    Animon are sentient, intelligent monsters that can speak human languages. When they build a strong bond with a Kid partner, they grow in strength and evolve into powerful new forms.
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="animon-name">Animon Name:</label>
                        <input type="text" id="animon-name" placeholder="Enter your Animon's name">
                    </div>

                    <div class="form-group">
                        <label for="animon-classification">Classification:</label>
                        <select id="animon-classification">
                            <option value="">Choose Classification</option>
                            <option value="beast">Beast - Mammalian features, favours grasslands/forests</option>
                            <option value="bird">Bird - Avian features, favours aerial environments</option>
                            <option value="bug">Bug - Insectoid features, favours underground</option>
                            <option value="dragon">Dragon - Draconic features, favours mountains</option>
                            <option value="fish">Fish - Aquatic features, favours underwater</option>
                            <option value="flora">Flora - Plant-like features, favours rich soil</option>
                            <option value="ghost">Ghost - Ethereal features, favours dark places</option>
                            <option value="humanoid">Humanoid - Human-like features, varies</option>
                            <option value="machine">Machine - Mechanical features, favours urban</option>
                            <option value="mineral">Mineral - Rocky/crystalline, favours underground</option>
                            <option value="slime">Slime - Gelatinous features, varies</option>
                            <option value="unknown">Unknown - Unusual features, varies</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="animon-element">Element:</label>
                        <select id="animon-element">
                            <option value="">Choose Element</option>
                            <option value="fire">Fire</option>
                            <option value="water">Water</option>
                            <option value="nature">Nature</option>
                            <option value="electric">Electric</option>
                            <option value="earth">Earth</option>
                            <option value="ice">Ice</option>
                            <option value="wind">Wind</option>
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="mirage">Mirage</option>
                            <option value="neutral">Neutral</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="animon-nature">Nature:</label>
                        <select id="animon-nature">
                            <option value="">Choose Nature</option>
                            <option value="brave">Brave (Courageous but Reckless)</option>
                            <option value="calm">Calm (Peaceful but Apathetic)</option>
                            <option value="cheerful">Cheerful (Upbeat but Naive)</option>
                            <option value="clever">Clever (Intelligent but Scheming)</option>
                            <option value="cool">Cool (Collected but Aloof)</option>
                            <option value="curious">Curious (Inquisitive but Nosy)</option>
                            <option value="fierce">Fierce (Determined but Aggressive)</option>
                            <option value="gentle">Gentle (Kind but Weak-willed)</option>
                            <option value="lively">Lively (Energetic but Restless)</option>
                            <option value="obedient">Obedient (Attentive but Dependant)</option>
                        </select>
                    </div>
                </div>

                <!-- Animon Information Display -->
                <div id="animon-info" class="character-info" style="display: none;">
                    <div id="classification-info" style="display: none;">
                        <h4 id="classification-title">Classification Information</h4>
                        <p id="classification-description"></p>
                    </div>

                    <div id="element-info" style="display: none;">
                        <h4 id="element-title">Element Information</h4>
                        <div class="element-effectiveness">
                            <span class="effectiveness-strong" id="element-strong"></span>
                            <span class="effectiveness-weak" id="element-weak"></span>
                        </div>
                    </div>

                    <div id="nature-info" style="display: none;">
                        <h4 id="nature-title">Nature Information</h4>
                        <p id="nature-description"></p>
                    </div>
                </div>

                <div class="evolution-stages">
                    <!-- Fledgling Stage -->
                    <div class="evolution-stage current">
                        <div class="stage-header">
                            <h4>FLEDGLING Stage</h4>
                        </div>
                        <div class="compact-points-remaining" id="fledgling-points">Points remaining: 4</div>

                        <div class="stage-content">
                            <div class="stage-stats">
                                <div class="compact-stat-item">
                                    <label>Power</label>
                                    <div class="stat-value" id="fledgling-power-value">1</div>
                                    <input type="range" id="fledgling-power" min="1" max="3" value="1" class="compact-stat-slider" onchange="updateFledglingStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Heart</label>
                                    <div class="stat-value" id="fledgling-heart-value">1</div>
                                    <input type="range" id="fledgling-heart" min="1" max="3" value="1" class="compact-stat-slider" onchange="updateFledglingStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Brains</label>
                                    <div class="stat-value" id="fledgling-brains-value">1</div>
                                    <input type="range" id="fledgling-brains" min="1" max="3" value="1" class="compact-stat-slider" onchange="updateFledglingStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Agility</label>
                                    <div class="stat-value" id="fledgling-agility-value">1</div>
                                    <input type="range" id="fledgling-agility" min="1" max="3" value="1" class="compact-stat-slider" onchange="updateFledglingStats()">
                                </div>
                            </div>

                            <div class="stage-derived">
                                <div class="compact-stat-item">
                                    <label>HP</label>
                                    <div class="stat-value" id="fledgling-hp">3</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Damage</label>
                                    <div class="stat-value" id="fledgling-damage">1</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Dodge</label>
                                    <div class="stat-value" id="fledgling-dodge">1</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Initiative</label>
                                    <div class="stat-value" id="fledgling-initiative">1</div>
                                </div>
                            </div>
                        </div>

                        <!-- Fledgling Qualities -->
                        <div class="stage-qualities">
                            <h5>Qualities (Max 2, Rank 1)</h5>
                            <div class="form-group">
                                <label>Quality 1:</label>
                                <input type="text" id="fledgling-quality-1" placeholder="e.g., Enhanced Senses">
                                <label>Rank:</label>
                                <input type="number" id="fledgling-quality-1-rank" min="1" max="3" value="1">
                            </div>
                            <div class="form-group">
                                <label>Quality 2:</label>
                                <input type="text" id="fledgling-quality-2" placeholder="e.g., Thick Hide">
                                <label>Rank:</label>
                                <input type="number" id="fledgling-quality-2-rank" min="1" max="3" value="1">
                            </div>
                        </div>
                    </div>

                    <!-- Basic Stage -->
                    <div class="evolution-stage">
                        <div class="stage-header">
                            <h4>BASIC Stage</h4>
                        </div>
                        <div class="compact-points-remaining" id="basic-points">Points remaining: 8</div>

                        <div class="stage-content">
                            <div class="stage-stats">
                                <div class="compact-stat-item">
                                    <label>Power</label>
                                    <div class="stat-value" id="basic-power-value">1</div>
                                    <input type="range" id="basic-power" min="1" max="4" value="1" class="compact-stat-slider" onchange="updateBasicStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Heart</label>
                                    <div class="stat-value" id="basic-heart-value">1</div>
                                    <input type="range" id="basic-heart" min="1" max="4" value="1" class="compact-stat-slider" onchange="updateBasicStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Brains</label>
                                    <div class="stat-value" id="basic-brains-value">1</div>
                                    <input type="range" id="basic-brains" min="1" max="4" value="1" class="compact-stat-slider" onchange="updateBasicStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Agility</label>
                                    <div class="stat-value" id="basic-agility-value">1</div>
                                    <input type="range" id="basic-agility" min="1" max="4" value="1" class="compact-stat-slider" onchange="updateBasicStats()">
                                </div>
                            </div>

                            <div class="stage-derived">
                                <div class="compact-stat-item">
                                    <label>HP</label>
                                    <div class="stat-value" id="basic-hp">8</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Damage</label>
                                    <div class="stat-value" id="basic-damage">2</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Dodge</label>
                                    <div class="stat-value" id="basic-dodge">1</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Initiative</label>
                                    <div class="stat-value" id="basic-initiative">1</div>
                                </div>
                            </div>
                        </div>

                        <!-- Basic Qualities -->
                        <div class="stage-qualities">
                            <h5>Qualities (Max 2, Rank 1-2)</h5>
                            <div class="form-group">
                                <label>Quality 1:</label>
                                <input type="text" id="basic-quality-1" placeholder="e.g., Enhanced Senses">
                                <label>Rank:</label>
                                <input type="number" id="basic-quality-1-rank" min="1" max="3" value="1">
                            </div>
                            <div class="form-group">
                                <label>Quality 2:</label>
                                <input type="text" id="basic-quality-2" placeholder="e.g., Thick Hide">
                                <label>Rank:</label>
                                <input type="number" id="basic-quality-2-rank" min="1" max="3" value="1">
                            </div>
                        </div>

                        <div class="stage-signature-attack">
                            <h5>Signature Attack</h5>
                            <div class="form-group">
                                <label>Attack Name:</label>
                                <input type="text" id="basic-attack-name" placeholder="e.g., Flame Burst">
                            </div>
                            <div class="form-group">
                                <label>Element:</label>
                                <select id="basic-attack-element">
                                    <option value="">Select Element</option>
                                    <option value="Fire">Fire</option>
                                    <option value="Water">Water</option>
                                    <option value="Earth">Earth</option>
                                    <option value="Air">Air</option>
                                    <option value="Lightning">Lightning</option>
                                    <option value="Ice">Ice</option>
                                    <option value="Nature">Nature</option>
                                    <option value="Metal">Metal</option>
                                    <option value="Light">Light</option>
                                    <option value="Dark">Dark</option>
                                    <option value="Spirit">Spirit</option>
                                    <option value="None">None</option>
                                </select>
                            </div>
                            <div class="effects-grid">
                                <label>Effects:</label>
                                <div class="effect-input">
                                    <input type="text" id="basic-attack-effect-1" placeholder="e.g., Deal 2 Harm">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="basic-attack-effect-2" placeholder="e.g., Burn (1 round)">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="basic-attack-effect-3" placeholder="Additional effect">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Super Stage -->
                    <div class="evolution-stage">
                        <div class="stage-header">
                            <h4>SUPER Stage</h4>
                            <div class="stage-requirement">Bond Level 3 Required</div>
                        </div>
                        <div class="compact-points-remaining" id="super-points">Points remaining: 10</div>

                        <div class="stage-content">
                            <div class="stage-stats">
                                <div class="compact-stat-item">
                                    <label>Power</label>
                                    <div class="stat-value" id="super-power-value">1</div>
                                    <input type="range" id="super-power" min="1" max="5" value="1" class="compact-stat-slider" onchange="updateSuperStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Heart</label>
                                    <div class="stat-value" id="super-heart-value">1</div>
                                    <input type="range" id="super-heart" min="1" max="5" value="1" class="compact-stat-slider" onchange="updateSuperStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Brains</label>
                                    <div class="stat-value" id="super-brains-value">1</div>
                                    <input type="range" id="super-brains" min="1" max="5" value="1" class="compact-stat-slider" onchange="updateSuperStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Agility</label>
                                    <div class="stat-value" id="super-agility-value">1</div>
                                    <input type="range" id="super-agility" min="1" max="5" value="1" class="compact-stat-slider" onchange="updateSuperStats()">
                                </div>
                            </div>

                            <div class="stage-derived">
                                <div class="compact-stat-item">
                                    <label>HP</label>
                                    <div class="stat-value" id="super-hp">12</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Damage</label>
                                    <div class="stat-value" id="super-damage">3</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Dodge</label>
                                    <div class="stat-value" id="super-dodge">1</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Initiative</label>
                                    <div class="stat-value" id="super-initiative">1</div>
                                </div>
                            </div>
                        </div>

                        <!-- Super Qualities -->
                        <div class="stage-qualities">
                            <h5>Qualities (Max 2, Rank 1-3)</h5>
                            <div class="form-group">
                                <label>Quality 1:</label>
                                <input type="text" id="super-quality-1" placeholder="e.g., Enhanced Senses">
                                <label>Rank:</label>
                                <input type="number" id="super-quality-1-rank" min="1" max="3" value="1">
                            </div>
                            <div class="form-group">
                                <label>Quality 2:</label>
                                <input type="text" id="super-quality-2" placeholder="e.g., Thick Hide">
                                <label>Rank:</label>
                                <input type="number" id="super-quality-2-rank" min="1" max="3" value="1">
                            </div>
                        </div>

                        <div class="stage-signature-attack">
                            <h5>Signature Attack</h5>
                            <div class="form-group">
                                <label>Attack Name:</label>
                                <input type="text" id="super-attack-name" placeholder="e.g., Thunder Strike">
                            </div>
                            <div class="form-group">
                                <label>Element:</label>
                                <select id="super-attack-element">
                                    <option value="">Select Element</option>
                                    <option value="Fire">Fire</option>
                                    <option value="Water">Water</option>
                                    <option value="Earth">Earth</option>
                                    <option value="Air">Air</option>
                                    <option value="Lightning">Lightning</option>
                                    <option value="Ice">Ice</option>
                                    <option value="Nature">Nature</option>
                                    <option value="Metal">Metal</option>
                                    <option value="Light">Light</option>
                                    <option value="Dark">Dark</option>
                                    <option value="Spirit">Spirit</option>
                                    <option value="None">None</option>
                                </select>
                            </div>
                            <div class="effects-grid">
                                <label>Effects:</label>
                                <div class="effect-input">
                                    <input type="text" id="super-attack-effect-1" placeholder="e.g., Deal 3 Harm">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="super-attack-effect-2" placeholder="e.g., Stun (1 round)">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="super-attack-effect-3" placeholder="Additional effect">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ultra Stage -->
                    <div class="evolution-stage">
                        <div class="stage-header">
                            <h4>ULTRA Stage</h4>
                            <div class="stage-requirement">Bond Level 6 Required</div>
                        </div>
                        <div class="compact-points-remaining" id="ultra-points">Points remaining: 12</div>

                        <div class="stage-content">
                            <div class="stage-stats">
                                <div class="compact-stat-item">
                                    <label>Power</label>
                                    <div class="stat-value" id="ultra-power-value">1</div>
                                    <input type="range" id="ultra-power" min="1" max="6" value="1" class="compact-stat-slider" onchange="updateUltraStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Heart</label>
                                    <div class="stat-value" id="ultra-heart-value">1</div>
                                    <input type="range" id="ultra-heart" min="1" max="6" value="1" class="compact-stat-slider" onchange="updateUltraStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Brains</label>
                                    <div class="stat-value" id="ultra-brains-value">1</div>
                                    <input type="range" id="ultra-brains" min="1" max="6" value="1" class="compact-stat-slider" onchange="updateUltraStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Agility</label>
                                    <div class="stat-value" id="ultra-agility-value">1</div>
                                    <input type="range" id="ultra-agility" min="1" max="6" value="1" class="compact-stat-slider" onchange="updateUltraStats()">
                                </div>
                            </div>

                            <div class="stage-derived">
                                <div class="compact-stat-item">
                                    <label>HP</label>
                                    <div class="stat-value" id="ultra-hp">17</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Damage</label>
                                    <div class="stat-value" id="ultra-damage">4</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Dodge</label>
                                    <div class="stat-value" id="ultra-dodge">1</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Initiative</label>
                                    <div class="stat-value" id="ultra-initiative">1</div>
                                </div>
                            </div>
                        </div>

                        <!-- Ultra Qualities -->
                        <div class="stage-qualities">
                            <h5>Qualities (Max 2, Rank 1-3)</h5>
                            <div class="form-group">
                                <label>Quality 1:</label>
                                <input type="text" id="ultra-quality-1" placeholder="e.g., Enhanced Senses">
                                <label>Rank:</label>
                                <input type="number" id="ultra-quality-1-rank" min="1" max="3" value="1">
                            </div>
                            <div class="form-group">
                                <label>Quality 2:</label>
                                <input type="text" id="ultra-quality-2" placeholder="e.g., Thick Hide">
                                <label>Rank:</label>
                                <input type="number" id="ultra-quality-2-rank" min="1" max="3" value="1">
                            </div>
                        </div>

                        <div class="stage-signature-attack">
                            <h5>Signature Attack</h5>
                            <div class="form-group">
                                <label>Attack Name:</label>
                                <input type="text" id="ultra-attack-name" placeholder="e.g., Meteor Crash">
                            </div>
                            <div class="form-group">
                                <label>Element:</label>
                                <select id="ultra-attack-element">
                                    <option value="">Select Element</option>
                                    <option value="Fire">Fire</option>
                                    <option value="Water">Water</option>
                                    <option value="Earth">Earth</option>
                                    <option value="Air">Air</option>
                                    <option value="Lightning">Lightning</option>
                                    <option value="Ice">Ice</option>
                                    <option value="Nature">Nature</option>
                                    <option value="Metal">Metal</option>
                                    <option value="Light">Light</option>
                                    <option value="Dark">Dark</option>
                                    <option value="Spirit">Spirit</option>
                                    <option value="None">None</option>
                                </select>
                            </div>
                            <div class="effects-grid">
                                <label>Effects:</label>
                                <div class="effect-input">
                                    <input type="text" id="ultra-attack-effect-1" placeholder="e.g., Deal 4 Harm">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="ultra-attack-effect-2" placeholder="e.g., Area effect (3x3)">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="ultra-attack-effect-3" placeholder="Additional effect">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Giga Stage -->
                    <div class="evolution-stage">
                        <div class="stage-header">
                            <h4>GIGA Stage</h4>
                            <div class="stage-requirement">Bond Level 9 Required</div>
                        </div>
                        <div class="compact-points-remaining" id="giga-points">Points remaining: 14</div>

                        <div class="stage-content">
                            <div class="stage-stats">
                                <div class="compact-stat-item">
                                    <label>Power</label>
                                    <div class="stat-value" id="giga-power-value">1</div>
                                    <input type="range" id="giga-power" min="1" max="7" value="1" class="compact-stat-slider" onchange="updateGigaStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Heart</label>
                                    <div class="stat-value" id="giga-heart-value">1</div>
                                    <input type="range" id="giga-heart" min="1" max="7" value="1" class="compact-stat-slider" onchange="updateGigaStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Brains</label>
                                    <div class="stat-value" id="giga-brains-value">1</div>
                                    <input type="range" id="giga-brains" min="1" max="7" value="1" class="compact-stat-slider" onchange="updateGigaStats()">
                                </div>

                                <div class="compact-stat-item">
                                    <label>Agility</label>
                                    <div class="stat-value" id="giga-agility-value">1</div>
                                    <input type="range" id="giga-agility" min="1" max="7" value="1" class="compact-stat-slider" onchange="updateGigaStats()">
                                </div>
                            </div>

                            <div class="stage-derived">
                                <div class="compact-stat-item">
                                    <label>HP</label>
                                    <div class="stat-value" id="giga-hp">22</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Damage</label>
                                    <div class="stat-value" id="giga-damage">5</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Dodge</label>
                                    <div class="stat-value" id="giga-dodge">1</div>
                                </div>
                                <div class="compact-stat-item">
                                    <label>Initiative</label>
                                    <div class="stat-value" id="giga-initiative">1</div>
                                </div>
                            </div>
                        </div>

                        <!-- Giga Qualities -->
                        <div class="stage-qualities">
                            <h5>Qualities (Max 2, Rank 1-3)</h5>
                            <div class="form-group">
                                <label>Quality 1:</label>
                                <input type="text" id="giga-quality-1" placeholder="e.g., Enhanced Senses">
                                <label>Rank:</label>
                                <input type="number" id="giga-quality-1-rank" min="1" max="3" value="1">
                            </div>
                            <div class="form-group">
                                <label>Quality 2:</label>
                                <input type="text" id="giga-quality-2" placeholder="e.g., Thick Hide">
                                <label>Rank:</label>
                                <input type="number" id="giga-quality-2-rank" min="1" max="3" value="1">
                            </div>
                        </div>

                        <div class="stage-signature-attack">
                            <h5>Signature Attack</h5>
                            <div class="form-group">
                                <label>Attack Name:</label>
                                <input type="text" id="giga-attack-name" placeholder="e.g., Cosmic Devastation">
                            </div>
                            <div class="form-group">
                                <label>Element:</label>
                                <select id="giga-attack-element">
                                    <option value="">Select Element</option>
                                    <option value="Fire">Fire</option>
                                    <option value="Water">Water</option>
                                    <option value="Earth">Earth</option>
                                    <option value="Air">Air</option>
                                    <option value="Lightning">Lightning</option>
                                    <option value="Ice">Ice</option>
                                    <option value="Nature">Nature</option>
                                    <option value="Metal">Metal</option>
                                    <option value="Light">Light</option>
                                    <option value="Dark">Dark</option>
                                    <option value="Spirit">Spirit</option>
                                    <option value="None">None</option>
                                </select>
                            </div>
                            <div class="effects-grid">
                                <label>Effects:</label>
                                <div class="effect-input">
                                    <input type="text" id="giga-attack-effect-1" placeholder="e.g., Deal 5 Harm">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="giga-attack-effect-2" placeholder="e.g., Massive area (5x5)">
                                </div>
                                <div class="effect-input">
                                    <input type="text" id="giga-attack-effect-3" placeholder="Additional effect">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="signature-attack">
                    <h3>Signature Attack (Basic Stage)</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="signature-name">Attack Name:</label>
                            <input type="text" id="signature-name" placeholder="e.g., Lightning Breath, Solar Beam">
                        </div>
                        <div class="form-group">
                            <label for="signature-element">Attack Element:</label>
                            <select id="signature-element">
                                <option value="">Choose Element</option>
                                <option value="fire">Fire</option>
                                <option value="water">Water</option>
                                <option value="nature">Nature</option>
                                <option value="electric">Electric</option>
                                <option value="earth">Earth</option>
                                <option value="ice">Ice</option>
                                <option value="wind">Wind</option>
                                <option value="light">Light</option>
                                <option value="dark">Dark</option>
                                <option value="mirage">Mirage</option>
                                <option value="neutral">Neutral</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="signature-effect">Effect:</label>
                        <select id="signature-effect">
                            <option value="">Choose Effect</option>
                            <option value="accurate">Accurate - Attack made with Boost</option>
                            <option value="area">Area - Hits multiple targets</option>
                            <option value="brutal">Brutal - +1 Damage</option>
                            <option value="defensive">Defensive - +1 Dodge until next turn</option>
                            <option value="draining">Draining - Restores 1 HP when hits</option>
                            <option value="empowering">Empowering - +1 to all Stats until next turn</option>
                            <option value="hindering">Hindering - Target gets -1 to all Stats until next turn</option>
                            <option value="piercing">Piercing - Ignores 1 point of Dodge</option>
                            <option value="reliable">Reliable - Minimum 1 success guaranteed</option>
                            <option value="stunning">Stunning - Target loses next action if hit</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Uses per Combat: <span id="signature-uses">1</span> (Equal to Brains score)</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="animon-quality">Quality (Rank 1):</label>
                    <input type="text" id="animon-quality" placeholder="e.g., Enhanced Senses, Thick Hide, Natural Camouflage">
                </div>
            </div>

            <!-- Summary Tab -->
            <div id="summary" class="tab-content">
                <h2>Character Summary</h2>
                <div class="description">
                    Review your completed characters. Use the export buttons to save or print your character sheets.
                </div>

                <div class="character-summary" id="character-summary">
                    <!-- Summary will be generated here -->
                </div>

                <div class="export-buttons">
                    <button class="btn btn-primary" onclick="exportToPDF()">üìÑ Export to PDF</button>
                    <button class="btn btn-secondary" onclick="exportToJSON()">üíæ Save as JSON</button>
                    <button class="btn btn-secondary" onclick="loadFromJSON()">üìÅ Load from JSON</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game data from JSON files
        let gameData = {
            kidCharacters: [],
            animonData: {},
            gameRules: {}
        };

        // Load JSON data
        async function loadGameData() {
            try {
                // Load kid characters data
                const kidResponse = await fetch('./kid_characters.json');
                gameData.kidCharacters = await kidResponse.json();

                // Load animon data
                const animonResponse = await fetch('./animon_data.json');
                gameData.animonData = await animonResponse.json();

                // Load game rules
                const rulesResponse = await fetch('./game_rules.json');
                gameData.gameRules = await rulesResponse.json();

                // Initialize form with loaded data
                initializeFormWithData();
            } catch (error) {
                console.warn('Could not load game data files:', error);
                // Continue with hardcoded defaults if files not available
                initializeFormWithData();
            }
        }

        // Initialize form elements with data
        function initializeFormWithData() {
            populateKidTypeOptions();
            populateAnimonOptions();
            populateTalentSuggestions();
            populateQualitySuggestions();
        }

        // Character data storage
        let characterData = {
            player: {
                name: ''
            },
            kid: {
                name: '',
                type: '',
                traits: { body: '', mind: '', spirit: '' },
                talents: ['', ''],
                flaw: '',
                desire: '',
                specialItem: '',
                stuff: '',
                stamina: 4,
                bondPoints: 3,
                bondLevel: 1,
                xp: 0,
                bondStrain: 0,
                harm: { level1: '', level2: '', level3: '', shaken: false },
                relationships: ''
            },
            animon: {
                name: '',
                classification: '',
                element: '',
                nature: '',
                basic: {
                    stats: { power: 1, heart: 1, brains: 1, agility: 1 },
                    hp: 8,
                    damage: 2,
                    dodge: 1,
                    initiative: 1,
                    qualities: [{ name: '', rank: 1 }, { name: '', rank: 1 }],
                    signatureAttack: { name: '', element: '', effects: [] }
                },
                fledgling: {
                    stats: { power: 1, heart: 1, brains: 1, agility: 1 },
                    hp: 3,
                    damage: 1,
                    dodge: 1,
                    initiative: 1,
                    qualities: [{ name: '', rank: 1 }, { name: '', rank: 1 }]
                },
                super: {
                    stats: { power: 1, heart: 1, brains: 1, agility: 1 },
                    hp: 12,
                    damage: 3,
                    dodge: 1,
                    initiative: 1,
                    qualities: [{ name: '', rank: 1 }, { name: '', rank: 1 }],
                    signatureAttack: { name: '', element: '', effects: [] }
                },
                ultra: {
                    stats: { power: 1, heart: 1, brains: 1, agility: 1 },
                    hp: 17,
                    damage: 4,
                    dodge: 1,
                    initiative: 1,
                    qualities: [{ name: '', rank: 1 }, { name: '', rank: 1 }],
                    signatureAttack: { name: '', element: '', effects: [] }
                },
                giga: {
                    stats: { power: 1, heart: 1, brains: 1, agility: 1 },
                    hp: 22,
                    damage: 5,
                    dodge: 1,
                    initiative: 1,
                    qualities: [{ name: '', rank: 1 }, { name: '', rank: 1 }],
                    signatureAttack: { name: '', element: '', effects: [] }
                },
                signatureAttack: {
                    name: '',
                    element: '',
                    effect: '',
                    uses: 1
                }
            }
        };

        // Populate Kid Type options from JSON data
        function populateKidTypeOptions() {
            const kidTypeSelect = document.getElementById('kid-type');
            if (!kidTypeSelect || !gameData.kidCharacters.length) return;

            // Clear existing options except the first
            kidTypeSelect.innerHTML = '<option value="">Choose a Kid Type</option>';

            // Add options from JSON data
            gameData.kidCharacters.forEach(kidType => {
                const option = document.createElement('option');
                option.value = kidType.name.toLowerCase().replace(/\s+/g, '-');
                option.textContent = kidType.name;
                option.dataset.description = kidType.description;
                option.dataset.typeFeature = kidType.type_feature;
                kidTypeSelect.appendChild(option);
            });

            // Add change event listener to auto-populate related fields
            kidTypeSelect.addEventListener('change', handleKidTypeChange);
        }

        // Handle Kid Type selection
        function handleKidTypeChange(event) {
            const selectedValue = event.target.value;
            const infoDiv = document.getElementById('kid-type-info');

            if (!selectedValue) {
                infoDiv.style.display = 'none';
                return;
            }

            const kidData = gameData.kidCharacters.find(kid =>
                kid.name.toLowerCase().replace(/\s+/g, '-') === selectedValue
            );

            if (kidData) {
                // Display character information
                document.getElementById('kid-type-title').textContent = kidData.name;
                document.getElementById('kid-type-description').textContent = kidData.description;
                document.getElementById('kid-type-feature').textContent = kidData.type_feature;

                // Create clickable suggestion tags
                createSuggestionTags('suggested-talents', kidData.talents, 'talent');
                createSuggestionTags('suggested-flaws', kidData.flaws, 'flaw');
                createSuggestionTags('suggested-desires', kidData.desires, 'desire');
                createSuggestionTags('suggested-special-items', kidData.special_items, 'special-item');

                infoDiv.style.display = 'block';

                // Auto-populate talent suggestions
                populateTalentOptions(kidData.talents);

                // Auto-populate flaw suggestions
                populateFlawOptions(kidData.flaws);

                // Auto-populate desire suggestions
                populateDesireOptions(kidData.desires);

                // Auto-populate special item suggestions
                populateSpecialItemOptions(kidData.special_items);

                // Auto-populate stuff suggestions
                populateStuffOptions(kidData.stuff);
            }
        }

        // Create clickable suggestion tags
        function createSuggestionTags(containerId, suggestions, fieldType) {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = '';
            suggestions.forEach(suggestion => {
                const tag = document.createElement('span');
                tag.className = 'suggestion-tag';
                tag.textContent = suggestion;
                tag.onclick = () => applySuggestion(suggestion, fieldType);
                container.appendChild(tag);
            });
        }

        // Apply suggestion to appropriate field
        function applySuggestion(suggestion, fieldType) {
            switch (fieldType) {
                case 'talent':
                    const talent1 = document.getElementById('talent1');
                    const talent2 = document.getElementById('talent2');
                    if (!talent1.value) {
                        talent1.value = suggestion;
                    } else if (!talent2.value) {
                        talent2.value = suggestion;
                    }
                    break;
                case 'flaw':
                    document.getElementById('kid-flaw').value = suggestion;
                    break;
                case 'desire':
                    document.getElementById('kid-desire').value = suggestion;
                    break;
                case 'special-item':
                    document.getElementById('special-item').value = suggestion;
                    break;
            }
        }

        // Populate Animon options from JSON data
        function populateAnimonOptions() {
            if (!gameData.animonData.classifications) return;

            // Populate classifications
            const classificationSelect = document.getElementById('animon-classification');
            if (classificationSelect) {
                classificationSelect.innerHTML = '<option value="">Choose Classification</option>';
                gameData.animonData.classifications.forEach(cls => {
                    const option = document.createElement('option');
                    option.value = cls.name.toLowerCase();
                    option.textContent = cls.name;
                    option.title = cls.description;
                    classificationSelect.appendChild(option);
                });

                // Add event listener for classification info
                classificationSelect.addEventListener('change', handleClassificationChange);
            }

            // Populate elements
            const elementSelect = document.getElementById('animon-element');
            if (elementSelect) {
                elementSelect.innerHTML = '<option value="">Choose Element</option>';
                gameData.animonData.elements.forEach(element => {
                    const option = document.createElement('option');
                    option.value = element.name.toLowerCase();
                    option.textContent = element.name;

                    // Add effectiveness info as title
                    let effectiveness = '';
                    if (element.strong_against.length) {
                        effectiveness += `Strong vs: ${element.strong_against.join(', ')}`;
                    }
                    if (element.weak_against.length) {
                        effectiveness += ` | Weak vs: ${element.weak_against.join(', ')}`;
                    }
                    option.title = effectiveness;

                    elementSelect.appendChild(option);
                });

                // Add event listener for element info
                elementSelect.addEventListener('change', handleElementChange);
            }

            // Populate natures
            const natureSelect = document.getElementById('animon-nature');
            if (natureSelect) {
                natureSelect.innerHTML = '<option value="">Choose Nature</option>';
                gameData.animonData.natures.forEach(nature => {
                    const option = document.createElement('option');
                    option.value = nature.name.toLowerCase();
                    option.textContent = `${nature.name} (${nature.positive} but ${nature.negative})`;
                    natureSelect.appendChild(option);
                });

                // Add event listener for nature info
                natureSelect.addEventListener('change', handleNatureChange);
            }

            // Populate signature attack effects
            populateSignatureAttackEffects();
        }

        // Handle Animon selection changes
        function handleClassificationChange(event) {
            const selectedValue = event.target.value;
            const classificationInfo = document.getElementById('classification-info');
            const animonInfo = document.getElementById('animon-info');

            if (!selectedValue) {
                classificationInfo.style.display = 'none';
                updateAnimonInfoVisibility();
                return;
            }

            const classData = gameData.animonData.classifications.find(cls =>
                cls.name.toLowerCase() === selectedValue
            );

            if (classData) {
                document.getElementById('classification-title').textContent = classData.name + ' Classification';
                document.getElementById('classification-description').textContent = classData.description;
                classificationInfo.style.display = 'block';
                animonInfo.style.display = 'block';
            }
        }

        function handleElementChange(event) {
            const selectedValue = event.target.value;
            const elementInfo = document.getElementById('element-info');
            const animonInfo = document.getElementById('animon-info');

            if (!selectedValue) {
                elementInfo.style.display = 'none';
                updateAnimonInfoVisibility();
                return;
            }

            const elementData = gameData.animonData.elements.find(elem =>
                elem.name.toLowerCase() === selectedValue
            );

            if (elementData) {
                document.getElementById('element-title').textContent = elementData.name + ' Element';

                const strongSpan = document.getElementById('element-strong');
                const weakSpan = document.getElementById('element-weak');

                strongSpan.textContent = elementData.strong_against.length ?
                    `Strong vs: ${elementData.strong_against.join(', ')}` : '';
                weakSpan.textContent = elementData.weak_against.length ?
                    `Weak vs: ${elementData.weak_against.join(', ')}` : '';

                elementInfo.style.display = 'block';
                animonInfo.style.display = 'block';
            }
        }

        function handleNatureChange(event) {
            const selectedValue = event.target.value;
            const natureInfo = document.getElementById('nature-info');
            const animonInfo = document.getElementById('animon-info');

            if (!selectedValue) {
                natureInfo.style.display = 'none';
                updateAnimonInfoVisibility();
                return;
            }

            const natureData = gameData.animonData.natures.find(nature =>
                nature.name.toLowerCase() === selectedValue
            );

            if (natureData) {
                document.getElementById('nature-title').textContent = natureData.name + ' Nature';
                document.getElementById('nature-description').textContent =
                    `Positive trait: ${natureData.positive} | Negative trait: ${natureData.negative}`;
                natureInfo.style.display = 'block';
                animonInfo.style.display = 'block';
            }
        }

        function updateAnimonInfoVisibility() {
            const classificationInfo = document.getElementById('classification-info');
            const elementInfo = document.getElementById('element-info');
            const natureInfo = document.getElementById('nature-info');
            const animonInfo = document.getElementById('animon-info');

            const hasAnyInfo = classificationInfo.style.display !== 'none' ||
                             elementInfo.style.display !== 'none' ||
                             natureInfo.style.display !== 'none';

            animonInfo.style.display = hasAnyInfo ? 'block' : 'none';
        }

        // Populate talent suggestions
        function populateTalentOptions(talentList = []) {
            // Add datalist for talent autocomplete
            let talentDatalist = document.getElementById('talent-suggestions');
            if (!talentDatalist) {
                talentDatalist = document.createElement('datalist');
                talentDatalist.id = 'talent-suggestions';
                document.body.appendChild(talentDatalist);
            }

            // Clear existing options
            talentDatalist.innerHTML = '';

            // Add talents from selected kid type or general list
            const talents = talentList.length ? talentList : getAllTalents();
            talents.forEach(talent => {
                const option = document.createElement('option');
                option.value = talent;
                talentDatalist.appendChild(option);
            });

            // Attach datalist to talent inputs
            const talent1 = document.getElementById('talent1');
            const talent2 = document.getElementById('talent2');
            if (talent1) talent1.setAttribute('list', 'talent-suggestions');
            if (talent2) talent2.setAttribute('list', 'talent-suggestions');
        }

        // Get all talents from all kid types
        function getAllTalents() {
            const allTalents = new Set();
            gameData.kidCharacters.forEach(kid => {
                kid.talents.forEach(talent => allTalents.add(talent));
            });
            return Array.from(allTalents).sort();
        }

        // Populate other suggestion lists
        function populateFlawOptions(flaws = []) {
            createSuggestionDatalist('flaw-suggestions', 'kid-flaw', flaws.length ? flaws : getAllFlaws());
        }

        function populateDesireOptions(desires = []) {
            createSuggestionDatalist('desire-suggestions', 'kid-desire', desires.length ? desires : getAllDesires());
        }

        function populateSpecialItemOptions(items = []) {
            createSuggestionDatalist('item-suggestions', 'special-item', items.length ? items : getAllSpecialItems());
        }

        function populateStuffOptions(stuff = []) {
            createSuggestionDatalist('stuff-suggestions', 'kid-stuff', stuff.length ? stuff : getAllStuff());
        }

        // Helper function to create suggestion datalists
        function createSuggestionDatalist(datalistId, inputId, options) {
            let datalist = document.getElementById(datalistId);
            if (!datalist) {
                datalist = document.createElement('datalist');
                datalist.id = datalistId;
                document.body.appendChild(datalist);
            }

            datalist.innerHTML = '';
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                datalist.appendChild(optionElement);
            });

            const input = document.getElementById(inputId);
            if (input) input.setAttribute('list', datalistId);
        }

        // Get all options from all kid types
        function getAllFlaws() {
            const allFlaws = new Set();
            gameData.kidCharacters.forEach(kid => {
                kid.flaws.forEach(flaw => allFlaws.add(flaw));
            });
            return Array.from(allFlaws).sort();
        }

        function getAllDesires() {
            const allDesires = new Set();
            gameData.kidCharacters.forEach(kid => {
                kid.desires.forEach(desire => allDesires.add(desire));
            });
            return Array.from(allDesires).sort();
        }

        function getAllSpecialItems() {
            const allItems = new Set();
            gameData.kidCharacters.forEach(kid => {
                kid.special_items.forEach(item => allItems.add(item));
            });
            return Array.from(allItems).sort();
        }

        function getAllStuff() {
            const allStuff = new Set();
            gameData.kidCharacters.forEach(kid => {
                kid.stuff.forEach(stuff => allStuff.add(stuff));
            });
            return Array.from(allStuff).sort();
        }

        // Populate signature attack effects
        function populateSignatureAttackEffects() {
            const effectSelect = document.getElementById('signature-effect');
            if (!effectSelect || !gameData.animonData.signature_attack_effects) return;

            effectSelect.innerHTML = '<option value="">Choose Effect</option>';
            gameData.animonData.signature_attack_effects.forEach(effect => {
                const option = document.createElement('option');
                option.value = effect.name.toLowerCase().replace(/\s+/g, '-');
                option.textContent = effect.name;
                option.title = effect.description;
                effectSelect.appendChild(option);
            });
        }

        // Populate quality suggestions for evolution stages
        function populateQualitySuggestions() {
            if (!gameData.animonData.qualities) return;

            // Create datalist for quality suggestions
            let qualityDatalist = document.getElementById('quality-suggestions');
            if (!qualityDatalist) {
                qualityDatalist = document.createElement('datalist');
                qualityDatalist.id = 'quality-suggestions';
                document.body.appendChild(qualityDatalist);
            }

            qualityDatalist.innerHTML = '';
            gameData.animonData.qualities.forEach(quality => {
                const option = document.createElement('option');
                option.value = quality.name;
                option.dataset.description = quality.description;
                option.dataset.category = quality.category;
                qualityDatalist.appendChild(option);
            });

            // Attach to all quality input fields
            const stages = ['fledgling', 'basic', 'super', 'ultra', 'giga'];
            stages.forEach(stage => {
                const quality1 = document.getElementById(`${stage}-quality-1`);
                const quality2 = document.getElementById(`${stage}-quality-2`);
                if (quality1) quality1.setAttribute('list', 'quality-suggestions');
                if (quality2) quality2.setAttribute('list', 'quality-suggestions');
            });
        }

        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked tab
            event.target.classList.add('active');

            // Update summary if summary tab is selected
            if (tabName === 'summary') {
                updateSummary();
            }
        }

        // Trait points management
        function updateTraitPoints() {
            const body = parseInt(document.getElementById('trait-body').value) || 0;
            const mind = parseInt(document.getElementById('trait-mind').value) || 0;
            const spirit = parseInt(document.getElementById('trait-spirit').value) || 0;

            const assigned = [body, mind, spirit].filter(v => v > 0);
            const required = [4, 3, 2];

            // Check for duplicates
            const hasDuplicates = assigned.length !== new Set(assigned).size;
            const isValid = assigned.length === 3 &&
                           assigned.sort().join(',') === required.sort().join(',') &&
                           !hasDuplicates;

            const pointsDisplay = document.getElementById('trait-points');
            if (isValid) {
                pointsDisplay.textContent = 'All traits assigned correctly!';
                pointsDisplay.style.background = '#d4edda';
                pointsDisplay.style.color = '#155724';
            } else {
                pointsDisplay.textContent = 'Points to assign: 4, 3, 2 (each used once)';
                pointsDisplay.style.background = '#e7f3ff';
                pointsDisplay.style.color = '#0066cc';
            }

            // Update character data
            characterData.kid.traits = { body, mind, spirit };
        }

        // Basic stage stats management
        function updateBasicStats() {
            const power = parseInt(document.getElementById('basic-power').value);
            const heart = parseInt(document.getElementById('basic-heart').value);
            const brains = parseInt(document.getElementById('basic-brains').value);
            const agility = parseInt(document.getElementById('basic-agility').value);

            // Update display values
            document.getElementById('basic-power-value').textContent = power;
            document.getElementById('basic-heart-value').textContent = heart;
            document.getElementById('basic-brains-value').textContent = brains;
            document.getElementById('basic-agility-value').textContent = agility;

            // Calculate points used (each stat starts at 1, so subtract 4)
            const pointsUsed = (power + heart + brains + agility) - 4;
            const pointsRemaining = 8 - pointsUsed;

            const pointsDisplay = document.getElementById('basic-points');
            pointsDisplay.textContent = `Points remaining: ${pointsRemaining}`;

            if (pointsRemaining < 0) {
                pointsDisplay.style.background = '#f8d7da';
                pointsDisplay.style.color = '#721c24';
            } else if (pointsRemaining === 0) {
                pointsDisplay.style.background = '#d4edda';
                pointsDisplay.style.color = '#155724';
            } else {
                pointsDisplay.style.background = '#e7f3ff';
                pointsDisplay.style.color = '#0066cc';
            }

            // Calculate derived stats
            const hp = 5 + (3 * heart);
            const damage = 2 * power;
            const dodge = agility;
            const initiative = brains;

            document.getElementById('basic-hp').textContent = hp;
            document.getElementById('basic-damage').textContent = damage;
            document.getElementById('basic-dodge').textContent = dodge;
            document.getElementById('basic-initiative').textContent = initiative;

            // Update signature attack uses
            document.getElementById('signature-uses').textContent = brains;

            // Update character data
            characterData.animon.basic = {
                stats: { power, heart, brains, agility },
                hp, damage, dodge, initiative
            };
            characterData.animon.signatureAttack.uses = brains;
        }

        // Fledgling stage stats management
        function updateFledglingStats() {
            const power = parseInt(document.getElementById('fledgling-power').value);
            const heart = parseInt(document.getElementById('fledgling-heart').value);
            const brains = parseInt(document.getElementById('fledgling-brains').value);
            const agility = parseInt(document.getElementById('fledgling-agility').value);

            // Update display values
            document.getElementById('fledgling-power-value').textContent = power;
            document.getElementById('fledgling-heart-value').textContent = heart;
            document.getElementById('fledgling-brains-value').textContent = brains;
            document.getElementById('fledgling-agility-value').textContent = agility;

            // Calculate points used (each stat starts at 1, so subtract 4)
            const pointsUsed = (power + heart + brains + agility) - 4;
            const pointsRemaining = 4 - pointsUsed;

            const pointsDisplay = document.getElementById('fledgling-points');
            pointsDisplay.textContent = `Points remaining: ${pointsRemaining}`;

            if (pointsRemaining < 0) {
                pointsDisplay.style.background = '#f8d7da';
                pointsDisplay.style.color = '#721c24';
            } else if (pointsRemaining === 0) {
                pointsDisplay.style.background = '#d4edda';
                pointsDisplay.style.color = '#155724';
            } else {
                pointsDisplay.style.background = '#e7f3ff';
                pointsDisplay.style.color = '#0066cc';
            }

            // Calculate derived stats
            const hp = 3 * heart;
            const damage = power;
            const dodge = agility;
            const initiative = brains;

            document.getElementById('fledgling-hp').textContent = hp;
            document.getElementById('fledgling-damage').textContent = damage;
            document.getElementById('fledgling-dodge').textContent = dodge;
            document.getElementById('fledgling-initiative').textContent = initiative;

            // Update character data
            characterData.animon.fledgling = {
                stats: { power, heart, brains, agility },
                hp, damage, dodge, initiative
            };
        }

        // Super stage stats management
        function updateSuperStats() {
            const power = parseInt(document.getElementById('super-power').value);
            const heart = parseInt(document.getElementById('super-heart').value);
            const brains = parseInt(document.getElementById('super-brains').value);
            const agility = parseInt(document.getElementById('super-agility').value);

            // Update display values
            document.getElementById('super-power-value').textContent = power;
            document.getElementById('super-heart-value').textContent = heart;
            document.getElementById('super-brains-value').textContent = brains;
            document.getElementById('super-agility-value').textContent = agility;

            // Calculate points used (each stat starts at 1, so subtract 4)
            const pointsUsed = (power + heart + brains + agility) - 4;
            const pointsRemaining = 10 - pointsUsed;

            const pointsDisplay = document.getElementById('super-points');
            pointsDisplay.textContent = `Points remaining: ${pointsRemaining}`;

            if (pointsRemaining < 0) {
                pointsDisplay.style.background = '#f8d7da';
                pointsDisplay.style.color = '#721c24';
            } else if (pointsRemaining === 0) {
                pointsDisplay.style.background = '#d4edda';
                pointsDisplay.style.color = '#155724';
            } else {
                pointsDisplay.style.background = '#e7f3ff';
                pointsDisplay.style.color = '#0066cc';
            }

            // Calculate derived stats
            const hp = 8 + (4 * heart);
            const damage = 3 * power;
            const dodge = agility;
            const initiative = brains;

            document.getElementById('super-hp').textContent = hp;
            document.getElementById('super-damage').textContent = damage;
            document.getElementById('super-dodge').textContent = dodge;
            document.getElementById('super-initiative').textContent = initiative;

            // Update character data
            characterData.animon.super = {
                stats: { power, heart, brains, agility },
                hp, damage, dodge, initiative
            };
        }

        // Ultra stage stats management
        function updateUltraStats() {
            const power = parseInt(document.getElementById('ultra-power').value);
            const heart = parseInt(document.getElementById('ultra-heart').value);
            const brains = parseInt(document.getElementById('ultra-brains').value);
            const agility = parseInt(document.getElementById('ultra-agility').value);

            // Update display values
            document.getElementById('ultra-power-value').textContent = power;
            document.getElementById('ultra-heart-value').textContent = heart;
            document.getElementById('ultra-brains-value').textContent = brains;
            document.getElementById('ultra-agility-value').textContent = agility;

            // Calculate points used (each stat starts at 1, so subtract 4)
            const pointsUsed = (power + heart + brains + agility) - 4;
            const pointsRemaining = 12 - pointsUsed;

            const pointsDisplay = document.getElementById('ultra-points');
            pointsDisplay.textContent = `Points remaining: ${pointsRemaining}`;

            if (pointsRemaining < 0) {
                pointsDisplay.style.background = '#f8d7da';
                pointsDisplay.style.color = '#721c24';
            } else if (pointsRemaining === 0) {
                pointsDisplay.style.background = '#d4edda';
                pointsDisplay.style.color = '#155724';
            } else {
                pointsDisplay.style.background = '#e7f3ff';
                pointsDisplay.style.color = '#0066cc';
            }

            // Calculate derived stats
            const hp = 12 + (5 * heart);
            const damage = 4 * power;
            const dodge = agility;
            const initiative = brains;

            document.getElementById('ultra-hp').textContent = hp;
            document.getElementById('ultra-damage').textContent = damage;
            document.getElementById('ultra-dodge').textContent = dodge;
            document.getElementById('ultra-initiative').textContent = initiative;

            // Update character data
            characterData.animon.ultra = {
                stats: { power, heart, brains, agility },
                hp, damage, dodge, initiative
            };
        }

        // Giga stage stats management
        function updateGigaStats() {
            const power = parseInt(document.getElementById('giga-power').value);
            const heart = parseInt(document.getElementById('giga-heart').value);
            const brains = parseInt(document.getElementById('giga-brains').value);
            const agility = parseInt(document.getElementById('giga-agility').value);

            // Update display values
            document.getElementById('giga-power-value').textContent = power;
            document.getElementById('giga-heart-value').textContent = heart;
            document.getElementById('giga-brains-value').textContent = brains;
            document.getElementById('giga-agility-value').textContent = agility;

            // Calculate points used (each stat starts at 1, so subtract 4)
            const pointsUsed = (power + heart + brains + agility) - 4;
            const pointsRemaining = 14 - pointsUsed;

            const pointsDisplay = document.getElementById('giga-points');
            pointsDisplay.textContent = `Points remaining: ${pointsRemaining}`;

            if (pointsRemaining < 0) {
                pointsDisplay.style.background = '#f8d7da';
                pointsDisplay.style.color = '#721c24';
            } else if (pointsRemaining === 0) {
                pointsDisplay.style.background = '#d4edda';
                pointsDisplay.style.color = '#155724';
            } else {
                pointsDisplay.style.background = '#e7f3ff';
                pointsDisplay.style.color = '#0066cc';
            }

            // Calculate derived stats
            const hp = 16 + (6 * heart);
            const damage = 5 * power;
            const dodge = agility;
            const initiative = brains;

            document.getElementById('giga-hp').textContent = hp;
            document.getElementById('giga-damage').textContent = damage;
            document.getElementById('giga-dodge').textContent = dodge;
            document.getElementById('giga-initiative').textContent = initiative;

            // Update character data
            characterData.animon.giga = {
                stats: { power, heart, brains, agility },
                hp, damage, dodge, initiative
            };
        }

        // Update summary
        function updateSummary() {
            // Collect all form data
            collectFormData();

            const summaryDiv = document.getElementById('character-summary');

            summaryDiv.innerHTML = `
                <div class="summary-section">
                    <h3>üë§ Player</h3>
                    <p><strong>Player Name:</strong> ${characterData.player.name || 'Not set'}</p>
                </div>

                <div class="summary-section">
                    <h3>üßí Kid Character</h3>
                    <p><strong>Name:</strong> ${characterData.kid.name || 'Not set'}</p>
                    <p><strong>Type:</strong> ${characterData.kid.type || 'Not set'}</p>
                    <p><strong>Traits:</strong> Body ${characterData.kid.traits.body || '?'}, Mind ${characterData.kid.traits.mind || '?'}, Spirit ${characterData.kid.traits.spirit || '?'}</p>
                    <p><strong>Talents:</strong> ${characterData.kid.talents.filter(t => t).join(', ') || 'None set'}</p>
                    <p><strong>Flaw:</strong> ${characterData.kid.flaw || 'Not set'}</p>
                    <p><strong>Desire:</strong> ${characterData.kid.desire || 'Not set'}</p>
                    <p><strong>Special Item:</strong> ${characterData.kid.specialItem || 'Not set'}</p>
                    <p><strong>Stuff:</strong> ${characterData.kid.stuff || 'Not set'}</p>
                    <p><strong>Stamina:</strong> ${characterData.kid.stamina}</p>
                </div>

                <div class="summary-section">
                    <h3>üîó Bond & Experience</h3>
                    <p><strong>Bond Level:</strong> ${characterData.kid.bondLevel}</p>
                    <p><strong>XP:</strong> ${characterData.kid.xp}</p>
                    <p><strong>Bond Points:</strong> ${characterData.kid.bondPoints}</p>
                    <p><strong>Bond Strain:</strong> ${characterData.kid.bondStrain}</p>
                </div>

                <div class="summary-section">
                    <h3>üíî Harm</h3>
                    <p><strong>Level 1:</strong> ${characterData.kid.harm.level1 || 'None'}</p>
                    <p><strong>Level 2:</strong> ${characterData.kid.harm.level2 || 'None'}</p>
                    <p><strong>Level 3:</strong> ${characterData.kid.harm.level3 || 'None'}</p>
                    <p><strong>Shaken:</strong> ${characterData.kid.harm.shaken ? 'Yes' : 'No'}</p>
                </div>

                <div class="summary-section">
                    <h3>üë• Relationships</h3>
                    <p>${characterData.kid.relationships || 'Not set'}</p>
                </div>

                <div class="summary-section">
                    <h3>üêæ Animon Partner</h3>
                    <p><strong>Name:</strong> ${characterData.animon.name || 'Not set'}</p>
                    <p><strong>Classification:</strong> ${characterData.animon.classification || 'Not set'}</p>
                    <p><strong>Element:</strong> ${characterData.animon.element || 'Not set'}</p>
                    <p><strong>Nature:</strong> ${characterData.animon.nature || 'Not set'}</p>
                    <p><strong>Quality:</strong> ${characterData.animon.quality || 'Not set'} (Rank 1)</p>
                </div>

                <div class="summary-section">
                    <h3>üåü Fledgling Stage Stats</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>Power</h4>
                            <p>${characterData.animon.fledgling.stats.power}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Heart</h4>
                            <p>${characterData.animon.fledgling.stats.heart}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Brains</h4>
                            <p>${characterData.animon.fledgling.stats.brains}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Agility</h4>
                            <p>${characterData.animon.fledgling.stats.agility}</p>
                        </div>
                    </div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>HP</h4>
                            <p>${characterData.animon.fledgling.hp}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Damage</h4>
                            <p>${characterData.animon.fledgling.damage}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Dodge</h4>
                            <p>${characterData.animon.fledgling.dodge}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Initiative</h4>
                            <p>${characterData.animon.fledgling.initiative}</p>
                        </div>
                    </div>
                    <div class="qualities-display">
                        <h4>Qualities</h4>
                        <p><strong>Quality 1:</strong> ${characterData.animon.fledgling.qualities[0]?.name || 'Not set'} (Rank ${characterData.animon.fledgling.qualities[0]?.rank || 1})</p>
                        <p><strong>Quality 2:</strong> ${characterData.animon.fledgling.qualities[1]?.name || 'Not set'} (Rank ${characterData.animon.fledgling.qualities[1]?.rank || 1})</p>
                    </div>
                </div>

                <div class="summary-section">
                    <h3>‚≠ê Basic Stage Stats</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>Power</h4>
                            <p>${characterData.animon.basic.stats.power}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Heart</h4>
                            <p>${characterData.animon.basic.stats.heart}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Brains</h4>
                            <p>${characterData.animon.basic.stats.brains}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Agility</h4>
                            <p>${characterData.animon.basic.stats.agility}</p>
                        </div>
                    </div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>HP</h4>
                            <p>${characterData.animon.basic.hp}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Damage</h4>
                            <p>${characterData.animon.basic.damage}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Dodge</h4>
                            <p>${characterData.animon.basic.dodge}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Initiative</h4>
                            <p>${characterData.animon.basic.initiative}</p>
                        </div>
                    </div>
                    <div class="qualities-display">
                        <h4>Qualities</h4>
                        <p><strong>Quality 1:</strong> ${characterData.animon.basic.qualities[0]?.name || 'Not set'} (Rank ${characterData.animon.basic.qualities[0]?.rank || 1})</p>
                        <p><strong>Quality 2:</strong> ${characterData.animon.basic.qualities[1]?.name || 'Not set'} (Rank ${characterData.animon.basic.qualities[1]?.rank || 1})</p>
                    </div>
                    ${characterData.animon.basic.signatureAttack?.name ? `
                    <div class="signature-attack-display">
                        <h4>Signature Attack</h4>
                        <p><strong>Name:</strong> ${characterData.animon.basic.signatureAttack.name}</p>
                        <p><strong>Element:</strong> ${characterData.animon.basic.signatureAttack.element || 'None'}</p>
                        <p><strong>Effects:</strong> ${characterData.animon.basic.signatureAttack.effects?.join(', ') || 'None'}</p>
                    </div>
                    ` : ''}
                </div>

                <div class="summary-section">
                    <h3>üî• Super Stage Stats</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>Power</h4>
                            <p>${characterData.animon.super.stats.power}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Heart</h4>
                            <p>${characterData.animon.super.stats.heart}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Brains</h4>
                            <p>${characterData.animon.super.stats.brains}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Agility</h4>
                            <p>${characterData.animon.super.stats.agility}</p>
                        </div>
                    </div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>HP</h4>
                            <p>${characterData.animon.super.hp}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Damage</h4>
                            <p>${characterData.animon.super.damage}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Dodge</h4>
                            <p>${characterData.animon.super.dodge}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Initiative</h4>
                            <p>${characterData.animon.super.initiative}</p>
                        </div>
                    </div>
                    <div class="qualities-display">
                        <h4>Qualities</h4>
                        <p><strong>Quality 1:</strong> ${characterData.animon.super.qualities[0]?.name || 'Not set'} (Rank ${characterData.animon.super.qualities[0]?.rank || 1})</p>
                        <p><strong>Quality 2:</strong> ${characterData.animon.super.qualities[1]?.name || 'Not set'} (Rank ${characterData.animon.super.qualities[1]?.rank || 1})</p>
                    </div>
                    ${characterData.animon.super.signatureAttack?.name ? `
                    <div class="signature-attack-display">
                        <h4>Signature Attack</h4>
                        <p><strong>Name:</strong> ${characterData.animon.super.signatureAttack.name}</p>
                        <p><strong>Element:</strong> ${characterData.animon.super.signatureAttack.element || 'None'}</p>
                        <p><strong>Effects:</strong> ${characterData.animon.super.signatureAttack.effects?.join(', ') || 'None'}</p>
                    </div>
                    ` : ''}
                </div>

                <div class="summary-section">
                    <h3>üí• Ultra Stage Stats</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>Power</h4>
                            <p>${characterData.animon.ultra.stats.power}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Heart</h4>
                            <p>${characterData.animon.ultra.stats.heart}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Brains</h4>
                            <p>${characterData.animon.ultra.stats.brains}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Agility</h4>
                            <p>${characterData.animon.ultra.stats.agility}</p>
                        </div>
                    </div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>HP</h4>
                            <p>${characterData.animon.ultra.hp}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Damage</h4>
                            <p>${characterData.animon.ultra.damage}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Dodge</h4>
                            <p>${characterData.animon.ultra.dodge}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Initiative</h4>
                            <p>${characterData.animon.ultra.initiative}</p>
                        </div>
                    </div>
                    <div class="qualities-display">
                        <h4>Qualities</h4>
                        <p><strong>Quality 1:</strong> ${characterData.animon.ultra.qualities[0]?.name || 'Not set'} (Rank ${characterData.animon.ultra.qualities[0]?.rank || 1})</p>
                        <p><strong>Quality 2:</strong> ${characterData.animon.ultra.qualities[1]?.name || 'Not set'} (Rank ${characterData.animon.ultra.qualities[1]?.rank || 1})</p>
                    </div>
                    ${characterData.animon.ultra.signatureAttack?.name ? `
                    <div class="signature-attack-display">
                        <h4>Signature Attack</h4>
                        <p><strong>Name:</strong> ${characterData.animon.ultra.signatureAttack.name}</p>
                        <p><strong>Element:</strong> ${characterData.animon.ultra.signatureAttack.element || 'None'}</p>
                        <p><strong>Effects:</strong> ${characterData.animon.ultra.signatureAttack.effects?.join(', ') || 'None'}</p>
                    </div>
                    ` : ''}
                </div>

                <div class="summary-section">
                    <h3>üåü Giga Stage Stats</h3>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>Power</h4>
                            <p>${characterData.animon.giga.stats.power}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Heart</h4>
                            <p>${characterData.animon.giga.stats.heart}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Brains</h4>
                            <p>${characterData.animon.giga.stats.brains}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Agility</h4>
                            <p>${characterData.animon.giga.stats.agility}</p>
                        </div>
                    </div>
                    <div class="stat-grid">
                        <div class="stat-item">
                            <h4>HP</h4>
                            <p>${characterData.animon.giga.hp}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Damage</h4>
                            <p>${characterData.animon.giga.damage}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Dodge</h4>
                            <p>${characterData.animon.giga.dodge}</p>
                        </div>
                        <div class="stat-item">
                            <h4>Initiative</h4>
                            <p>${characterData.animon.giga.initiative}</p>
                        </div>
                    </div>
                    <div class="qualities-display">
                        <h4>Qualities</h4>
                        <p><strong>Quality 1:</strong> ${characterData.animon.giga.qualities[0]?.name || 'Not set'} (Rank ${characterData.animon.giga.qualities[0]?.rank || 1})</p>
                        <p><strong>Quality 2:</strong> ${characterData.animon.giga.qualities[1]?.name || 'Not set'} (Rank ${characterData.animon.giga.qualities[1]?.rank || 1})</p>
                    </div>
                    ${characterData.animon.giga.signatureAttack?.name ? `
                    <div class="signature-attack-display">
                        <h4>Signature Attack</h4>
                        <p><strong>Name:</strong> ${characterData.animon.giga.signatureAttack.name}</p>
                        <p><strong>Element:</strong> ${characterData.animon.giga.signatureAttack.element || 'None'}</p>
                        <p><strong>Effects:</strong> ${characterData.animon.giga.signatureAttack.effects?.join(', ') || 'None'}</p>
                    </div>
                    ` : ''}
                </div>

                <div class="summary-section">
                    <h3>‚ö° Signature Attack</h3>
                    <p><strong>Name:</strong> ${characterData.animon.signatureAttack.name || 'Not set'}</p>
                    <p><strong>Element:</strong> ${characterData.animon.signatureAttack.element || 'Not set'}</p>
                    <p><strong>Effect:</strong> ${characterData.animon.signatureAttack.effect || 'Not set'}</p>
                    <p><strong>Uses per Combat:</strong> ${characterData.animon.signatureAttack.uses}</p>
                    <p><strong>Rank:</strong> 1</p>
                </div>
            `;
        }

        // Collect form data
        function collectFormData() {
            // Player data
            characterData.player.name = document.getElementById('player-name').value;

            // Kid data
            characterData.kid.name = document.getElementById('kid-name').value;
            characterData.kid.type = document.getElementById('kid-type').value;
            characterData.kid.talents = [
                document.getElementById('talent1').value,
                document.getElementById('talent2').value
            ];
            characterData.kid.flaw = document.getElementById('kid-flaw').value;
            characterData.kid.desire = document.getElementById('kid-desire').value;
            characterData.kid.specialItem = document.getElementById('special-item').value;
            characterData.kid.stuff = document.getElementById('kid-stuff').value;

            // Bond and experience data
            characterData.kid.bondLevel = parseInt(document.getElementById('bond-level').value) || 1;
            characterData.kid.xp = parseInt(document.getElementById('xp').value) || 0;
            characterData.kid.bondPoints = parseInt(document.getElementById('bond-points').value) || 3;
            characterData.kid.bondStrain = parseInt(document.getElementById('bond-strain').value) || 0;

            // Harm data
            characterData.kid.harm.level1 = document.getElementById('harm-1').value;
            characterData.kid.harm.level2 = document.getElementById('harm-2').value;
            characterData.kid.harm.level3 = document.getElementById('harm-3').value;
            characterData.kid.harm.shaken = document.getElementById('shaken').checked;

            // Relationships
            characterData.kid.relationships = document.getElementById('relationships').value;

            // Animon data
            characterData.animon.name = document.getElementById('animon-name').value;
            characterData.animon.classification = document.getElementById('animon-classification').value;
            characterData.animon.element = document.getElementById('animon-element').value;
            characterData.animon.nature = document.getElementById('animon-nature').value;

            // Collect qualities for each stage
            const stages = ['fledgling', 'basic', 'super', 'ultra', 'giga'];
            stages.forEach(stage => {
                if (characterData.animon[stage]) {
                    characterData.animon[stage].qualities = [
                        {
                            name: document.getElementById(`${stage}-quality-1`).value,
                            rank: parseInt(document.getElementById(`${stage}-quality-1-rank`).value) || 1
                        },
                        {
                            name: document.getElementById(`${stage}-quality-2`).value,
                            rank: parseInt(document.getElementById(`${stage}-quality-2-rank`).value) || 1
                        }
                    ];
                    
                    // Collect signature attacks for stages that have them (not fledgling)
                    if (stage !== 'fledgling') {
                        characterData.animon[stage].signatureAttack = {
                            name: document.getElementById(`${stage}-attack-name`).value,
                            element: document.getElementById(`${stage}-attack-element`).value,
                            effects: [
                                document.getElementById(`${stage}-attack-effect-1`).value,
                                document.getElementById(`${stage}-attack-effect-2`).value,
                                document.getElementById(`${stage}-attack-effect-3`).value
                            ].filter(effect => effect.trim() !== '') // Remove empty effects
                        };
                    }
                }
            });

            // Legacy signature attack (now for basic stage compatibility)
            characterData.animon.signatureAttack.name = document.getElementById('signature-name').value;
            characterData.animon.signatureAttack.element = document.getElementById('signature-element').value;
            characterData.animon.signatureAttack.effect = document.getElementById('signature-effect').value;
        }

        // Export functions
        function exportToPDF() {
            collectFormData();
            window.print();
        }

        function exportToJSON() {
            collectFormData();
            const dataStr = JSON.stringify(characterData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `${characterData.kid.name || 'animon-character'}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        function loadFromJSON() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = JSON.parse(e.target.result);
                            loadCharacterData(data);
                        } catch (error) {
                            alert('Error loading file: Invalid JSON format');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function loadCharacterData(data) {
            characterData = data;

            // Load Player data
            document.getElementById('player-name').value = data.player?.name || '';

            // Load Kid data
            document.getElementById('kid-name').value = data.kid.name || '';
            document.getElementById('kid-type').value = data.kid.type || '';
            document.getElementById('trait-body').value = data.kid.traits.body || '';
            document.getElementById('trait-mind').value = data.kid.traits.mind || '';
            document.getElementById('trait-spirit').value = data.kid.traits.spirit || '';
            document.getElementById('talent1').value = data.kid.talents[0] || '';
            document.getElementById('talent2').value = data.kid.talents[1] || '';
            document.getElementById('kid-flaw').value = data.kid.flaw || '';
            document.getElementById('kid-desire').value = data.kid.desire || '';
            document.getElementById('special-item').value = data.kid.specialItem || '';
            document.getElementById('kid-stuff').value = data.kid.stuff || '';

            // Load Bond and experience data
            document.getElementById('bond-level').value = data.kid.bondLevel || 1;
            document.getElementById('xp').value = data.kid.xp || 0;
            document.getElementById('bond-points').value = data.kid.bondPoints || 3;
            document.getElementById('bond-strain').value = data.kid.bondStrain || 0;

            // Load Harm data
            document.getElementById('harm-1').value = data.kid.harm?.level1 || '';
            document.getElementById('harm-2').value = data.kid.harm?.level2 || '';
            document.getElementById('harm-3').value = data.kid.harm?.level3 || '';
            document.getElementById('shaken').checked = data.kid.harm?.shaken || false;

            // Load Relationships
            document.getElementById('relationships').value = data.kid.relationships || '';

            // Load Animon data
            document.getElementById('animon-name').value = data.animon.name || '';
            document.getElementById('animon-classification').value = data.animon.classification || '';
            document.getElementById('animon-element').value = data.animon.element || '';
            document.getElementById('animon-nature').value = data.animon.nature || '';

            // Load Qualities for each stage
            const stages = ['fledgling', 'basic', 'super', 'ultra', 'giga'];
            stages.forEach(stage => {
                if (data.animon[stage]?.qualities) {
                    document.getElementById(`${stage}-quality-1`).value = data.animon[stage].qualities[0]?.name || '';
                    document.getElementById(`${stage}-quality-1-rank`).value = data.animon[stage].qualities[0]?.rank || 1;
                    document.getElementById(`${stage}-quality-2`).value = data.animon[stage].qualities[1]?.name || '';
                    document.getElementById(`${stage}-quality-2-rank`).value = data.animon[stage].qualities[1]?.rank || 1;
                }
                
                // Load signature attacks for stages that have them (not fledgling)
                if (stage !== 'fledgling' && data.animon[stage]?.signatureAttack) {
                    const attack = data.animon[stage].signatureAttack;
                    document.getElementById(`${stage}-attack-name`).value = attack.name || '';
                    document.getElementById(`${stage}-attack-element`).value = attack.element || '';
                    if (attack.effects && attack.effects.length > 0) {
                        document.getElementById(`${stage}-attack-effect-1`).value = attack.effects[0] || '';
                        document.getElementById(`${stage}-attack-effect-2`).value = attack.effects[1] || '';
                        document.getElementById(`${stage}-attack-effect-3`).value = attack.effects[2] || '';
                    }
                }
            });

            // Load Basic stage stats
            document.getElementById('basic-power').value = data.animon.basic.stats.power;
            document.getElementById('basic-heart').value = data.animon.basic.stats.heart;
            document.getElementById('basic-brains').value = data.animon.basic.stats.brains;
            document.getElementById('basic-agility').value = data.animon.basic.stats.agility;

            // Load Fledgling stage stats
            document.getElementById('fledgling-power').value = data.animon.fledgling.stats.power;
            document.getElementById('fledgling-heart').value = data.animon.fledgling.stats.heart;
            document.getElementById('fledgling-brains').value = data.animon.fledgling.stats.brains;
            document.getElementById('fledgling-agility').value = data.animon.fledgling.stats.agility;

            // Load Super stage stats
            if (data.animon.super) {
                document.getElementById('super-power').value = data.animon.super.stats.power;
                document.getElementById('super-heart').value = data.animon.super.stats.heart;
                document.getElementById('super-brains').value = data.animon.super.stats.brains;
                document.getElementById('super-agility').value = data.animon.super.stats.agility;
            }

            // Load Ultra stage stats
            if (data.animon.ultra) {
                document.getElementById('ultra-power').value = data.animon.ultra.stats.power;
                document.getElementById('ultra-heart').value = data.animon.ultra.stats.heart;
                document.getElementById('ultra-brains').value = data.animon.ultra.stats.brains;
                document.getElementById('ultra-agility').value = data.animon.ultra.stats.agility;
            }

            // Load Giga stage stats
            if (data.animon.giga) {
                document.getElementById('giga-power').value = data.animon.giga.stats.power;
                document.getElementById('giga-heart').value = data.animon.giga.stats.heart;
                document.getElementById('giga-brains').value = data.animon.giga.stats.brains;
                document.getElementById('giga-agility').value = data.animon.giga.stats.agility;
            }

            // Load Signature attack
            document.getElementById('signature-name').value = data.animon.signatureAttack.name || '';
            document.getElementById('signature-element').value = data.animon.signatureAttack.element || '';
            document.getElementById('signature-effect').value = data.animon.signatureAttack.effect || '';

            // Update all displays
            updateTraitPoints();
            updateBasicStats();
            updateFledglingStats();
            updateSuperStats();
            updateUltraStats();
            updateGigaStats();

            alert('Character data loaded successfully!');
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Load game data from JSON files
            loadGameData();

            // Initialize stats
            updateBasicStats();
            updateFledglingStats();
            updateSuperStats();
            updateUltraStats();
            updateGigaStats();
        });
    </script>
</body>
</html>
